<mat-expansion-panel class="section-panel" [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon>auto_fix_high</mat-icon>
      AI Background Removal
    </mat-panel-title>
  </mat-expansion-panel-header>

  <!-- Image Preview -->
  <div class="image-preview" *ngIf="imagePreview">
    <img [src]="imagePreview" alt="Original image" class="preview-image">
  </div>

  <!-- Process Button -->
  <div class="actions">
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="isProcessing"
      (click)="processImage()">
      <mat-icon *ngIf="!isProcessing">smart_toy</mat-icon>
      <mat-spinner *ngIf="isProcessing" diameter="20"></mat-spinner>
      <span>{{ isProcessing ? 'Processing...' : 'Remove Background' }}</span>
    </button>
  </div>

  <!-- Progress Bar -->
  <div *ngIf="isProcessing" class="progress-section">
    <mat-progress-bar 
      mode="determinate" 
      [value]="progress.progress"
      [color]="progress.status === 'error' ? 'warn' : 'primary'">
    </mat-progress-bar>
    <p class="progress-text">
      <mat-icon class="progress-icon">{{ getProgressIcon() }}</mat-icon>
      {{ progress.message }}
    </p>
    <p class="progress-percentage">{{ progress.progress | number:'1.0-0' }}%</p>
  </div>
</mat-expansion-panel>

<!-- Results Panel -->
<app-result-comparison
  #resultsPanel
  *ngIf="processedImage && !isProcessing"
  title="Processed Result"
  [originalImage]="imagePreview"
  [resultImage]="processedImageUrl"
  resultTitle="Processed"
  downloadLabel="Download Processed Image"
  (download)="downloadImage()">
</app-result-comparison>
