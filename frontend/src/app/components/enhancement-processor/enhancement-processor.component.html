<mat-expansion-panel class="section-panel" [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon>auto_fix_high</mat-icon>
      AI Image Enhancement
    </mat-panel-title>
  </mat-expansion-panel-header>

  <div class="panel-content">
    <!-- Image Preview -->
    <div class="image-preview" *ngIf="imagePreview">
      <img [src]="imagePreview" alt="Original image" class="preview-image">
    </div>

    <!-- Footer: Button + Progress -->
    <div class="panel-footer">
      <div class="actions">
        <button 
          mat-raised-button 
          color="primary" 
          [disabled]="isProcessing"
          (click)="enhanceImage()">
          <mat-icon *ngIf="!isProcessing">auto_fix_high</mat-icon>
          <mat-spinner *ngIf="isProcessing" diameter="20"></mat-spinner>
          <span>{{ isProcessing ? 'Enhancing...' : 'Enhance Image' }}</span>
        </button>
      </div>

  <!-- Progress Bar -->
  <div *ngIf="isProcessing" class="progress-section">
    <mat-progress-bar 
      mode="determinate" 
      [value]="progress.progress"
      [color]="progress.status === 'error' ? 'warn' : 'primary'">
    </mat-progress-bar>
    <p class="progress-text">
      <mat-icon class="progress-icon">{{ getProgressIcon() }}</mat-icon>
      {{ progress.message }}
    </p>
    <p class="progress-percentage">{{ progress.progress | number:'1.0-0' }}%</p>
  </div>
    </div><!-- /panel-footer -->
  </div><!-- /panel-content -->
</mat-expansion-panel>
