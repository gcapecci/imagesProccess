<mat-expansion-panel class="section-panel" [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon>auto_fix_high</mat-icon>
      AI Image Enhancement
    </mat-panel-title>
  </mat-expansion-panel-header>

  <!-- Image Preview -->
  <div class="image-preview" *ngIf="imagePreview">
    <img [src]="imagePreview" alt="Original image" class="preview-image">
  </div>

  <!-- Process Button -->
  <div class="actions">
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="isProcessing"
      (click)="enhanceImage()">
      <mat-icon *ngIf="!isProcessing">auto_fix_high</mat-icon>
      <mat-spinner *ngIf="isProcessing" diameter="20"></mat-spinner>
      <span>{{ isProcessing ? 'Enhancing...' : 'Enhance Image' }}</span>
    </button>
  </div>

  <!-- Progress Bar -->
  <div *ngIf="isProcessing" class="progress-section">
    <mat-progress-bar 
      mode="determinate" 
      [value]="progress.progress"
      [color]="progress.status === 'error' ? 'warn' : 'primary'">
    </mat-progress-bar>
    <p class="progress-text">
      <mat-icon class="progress-icon">{{ getProgressIcon() }}</mat-icon>
      {{ progress.message }}
    </p>
    <p class="progress-percentage">{{ progress.progress | number:'1.0-0' }}%</p>
  </div>
</mat-expansion-panel>

<!-- Results Panel -->
<mat-expansion-panel 
  class="section-panel results-panel" 
  *ngIf="processedImage && !isProcessing" 
  [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon>compare</mat-icon>
      Enhanced Result
    </mat-panel-title>
  </mat-expansion-panel-header>

  <div class="comparison">
    <div class="image-container">
      <h4>Original</h4>
      <img [src]="imagePreview" alt="Original" class="result-image">
      <p class="image-label">Before</p>
    </div>
    
    <mat-icon class="comparison-arrow">arrow_forward</mat-icon>
    
    <div class="image-container">
      <h4>Enhanced</h4>
      <img [src]="processedImageUrl" alt="Enhanced" class="result-image">
      <p class="image-label">After</p>
    </div>
  </div>
  
  <div class="download-section">
    <button 
      mat-raised-button 
      color="accent" 
      (click)="downloadImage()">
      <mat-icon>download</mat-icon>
      Download Enhanced Image
    </button>
  </div>
</mat-expansion-panel>
